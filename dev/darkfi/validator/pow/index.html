<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="DarkFi PoW module"><title>darkfi::validator::pow - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../static.files/rustdoc-ca0dd0c4.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="darkfi" data-themes="" data-resource-suffix="" data-rustdoc-version="1.92.0 (ded5c06cf 2025-12-08)" data-channel="1.92.0" data-search-js="search-d69d8955.js" data-stringdex-js="stringdex-c3e638e9.js" data-settings-js="settings-c38705f0.js" ><script src="../../../static.files/storage-e2aeef58.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../static.files/main-ce535bd0.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Module pow</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../darkfi/index.html">darkfi</a><span class="version">0.5.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module pow</a></h2><h3><a href="#structs">Module Items</a></h3><ul class="block"><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#constants" title="Constants">Constants</a></li><li><a href="#functions" title="Functions">Functions</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="../index.html">In darkfi::<wbr>validator</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../../index.html">darkfi</a>::<wbr><a href="../index.html">validator</a></div><h1>Module <span>pow</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../src/darkfi/validator/pow.rs.html#19-739">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>DarkFi PoW module</p>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.PoWModule.html" title="struct darkfi::validator::pow::PoWModule">PoWModule</a></dt><dd>This struct represents the information required by the PoW algorithm</dd></dl><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="constant" href="constant.BLOCKCHAIN_TIMESTAMP_CHECK_WINDOW.html" title="constant darkfi::validator::pow::BLOCKCHAIN_TIMESTAMP_CHECK_WINDOW">BLOCKCHAIN_<wbr>TIMESTAMP_<wbr>CHECK_<wbr>WINDOW</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>How many most recent blocks to use to verify new blocksâ€™ timestamp</dd><dt><a class="constant" href="constant.BLOCK_FUTURE_TIME_LIMIT.html" title="constant darkfi::validator::pow::BLOCK_FUTURE_TIME_LIMIT">BLOCK_<wbr>FUTURE_<wbr>TIME_<wbr>LIMIT</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>Time limit in the future of what blocks can be</dd><dt><a class="constant" href="constant.BUF_SIZE.html" title="constant darkfi::validator::pow::BUF_SIZE">BUF_<wbr>SIZE</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>Ring buffer length.
Must be == DIFFICULTY_WINDOW + DIFFICULTY_LAG</dd><dt><a class="constant" href="constant.CUT_BEGIN.html" title="constant darkfi::validator::pow::CUT_BEGIN">CUT_<wbr>BEGIN</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>Already known cutoff start index for this config</dd><dt><a class="constant" href="constant.CUT_END.html" title="constant darkfi::validator::pow::CUT_END">CUT_END</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>Already known cutoff end index for this config</dd><dt><a class="constant" href="constant.DIFFICULTY_WINDOW.html" title="constant darkfi::validator::pow::DIFFICULTY_WINDOW">DIFFICULTY_<wbr>WINDOW</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>Amount of max items(blocks) to use for next difficulty calculation.
Must be &gt;= 2 and == BUF_SIZE - DIFFICULTY_LAG.</dd><dt><a class="constant" href="constant.RANDOMX_KEY_CHANGE_DELAY.html" title="constant darkfi::validator::pow::RANDOMX_KEY_CHANGE_DELAY">RANDOMX_<wbr>KEY_<wbr>CHANGE_<wbr>DELAY</a></dt><dd>RandomX VM key change delay</dd><dt><a class="constant" href="constant.RANDOMX_KEY_CHANGING_HEIGHT.html" title="constant darkfi::validator::pow::RANDOMX_KEY_CHANGING_HEIGHT">RANDOMX_<wbr>KEY_<wbr>CHANGING_<wbr>HEIGHT</a></dt><dd>RandomX VM key changing height</dd><dt><a class="constant" href="constant.RETAINED.html" title="constant darkfi::validator::pow::RETAINED">RETAINED</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>Max items to use for next difficulty calculation.
Must be DIFFICULTY_WINDOW - 2 * DIFFICULTY_CUT</dd><dt><a class="constant" href="constant._DIFFICULTY_CUT.html" title="constant darkfi::validator::pow::_DIFFICULTY_CUT">_DIFFICULTY_<wbr>CUT</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>Used to calculate how many items to retain for next difficulty
calculation. We are keeping the middle items, meaning cutting
both from frond and back of the ring buffer, ending up with max
DIFFICULTY_WINDOW - 2<em>DIFFICULTY_CUT items.
(2</em>DIFFICULTY_CUT &lt;= DIFFICULTY_WINDOW-2) must be true.</dd><dt><a class="constant" href="constant._DIFFICULTY_LAG.html" title="constant darkfi::validator::pow::_DIFFICULTY_LAG">_DIFFICULTY_<wbr>LAG</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>Amount of latest blocks to exlude from the calculation.
Our ring buffer has length: DIFFICULTY_WINDOW + DIFFICULTY_LAG,
but we only use DIFFICULTY_WINDOW items in calculations.
Must be == BUF_SIZE - DIFFICULTY_WINDOW.</dd></dl><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">Â§</a></h2><dl class="item-table"><dt><a class="fn" href="fn.generate_mining_vms.html" title="fn darkfi::validator::pow::generate_mining_vms">generate_<wbr>mining_<wbr>vms</a></dt><dd>Auxiliary function to generate mining VMs for provided RandomX key.</dd><dt><a class="fn" href="fn.get_mining_flags.html" title="fn darkfi::validator::pow::get_mining_flags">get_<wbr>mining_<wbr>flags</a></dt><dd>Auxiliary function to define <code>RandomXFlags</code> used in mining.</dd><dt><a class="fn" href="fn.init_dataset.html" title="fn darkfi::validator::pow::init_dataset">init_<wbr>dataset</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </dt><dd>Auxiliary function to initialize a <code>RandomXDataset</code> using all
available threads.</dd><dt><a class="fn" href="fn.mine_block.html" title="fn darkfi::validator::pow::mine_block">mine_<wbr>block</a></dt><dd>Mine provided header, based on provided PoW module next mine target,
using provided RandomX VMs setup.</dd></dl></section></div></main></body></html>